<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Posts</title>
</head>
<body>

<div th:replace="fragments/layout :: header"></div>

<h2>Posts</h2>

<div>
    <h3>Make a new post</h3>
    <form th:action="@{/posts/new}" method="POST">
        <input type="text" name="content"/>
        <input type="submit" value="Send"/>
    </form>
</div>

<div>
    <h3>Posts from your network</h3>
    <div th:each="post : ${posts}">
        <table>
            <tr>
                <td th:text="${post.createdBy.name}"></td>
                <td th:text="${post.timestamp}"></td>
            </tr>
            <tr >
                <td th:text="${post.content}"></td>
            </tr>
        </table>

        <h4>Comments: </h4>
        <div th:each="comment : ${post.comments}">
            <table>
                <tr>
                    <td th:text="${comment.createdBy.name}"></td>
                    <td th:text="${comment.timestamp}"></td>
                </tr>
                <tr>
                    <td th:text="${comment.content}" ></td>
                </tr>
            </table>
        </div>

        <div>
            <h4>Leave a Comment</h4>
            <form th:action="@{/posts/{id}/comment(id=${post.id})}" method="POST">
                <input type="text" name="content"/>
                <input type="submit" value="Send"/>
            </form>
        </div>

        <br/>
    </div>
</div>


</body>